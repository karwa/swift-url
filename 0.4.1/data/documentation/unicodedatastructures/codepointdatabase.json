{"variants":[{"paths":["\/documentation\/unicodedatastructures\/codepointdatabase"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/com.karwa.WebURL\/documentation\/UnicodeDataStructures\/CodePointDatabase"},"primaryContentSections":[{"declarations":[{"platforms":["Linux"],"tokens":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"CodePointDatabase"},{"kind":"text","text":"<"},{"kind":"genericParameter","text":"Schema"},{"kind":"text","text":"> "},{"kind":"keyword","text":"where"},{"kind":"text","text":" "},{"kind":"typeIdentifier","text":"Schema"},{"kind":"text","text":" : "},{"identifier":"doc:\/\/com.karwa.WebURL\/documentation\/UnicodeDataStructures\/CodePointDatabase_Schema","preciseIdentifier":"s:21UnicodeDataStructures24CodePointDatabase_SchemaP","kind":"typeIdentifier","text":"CodePointDatabase_Schema"}],"languages":["swift"]}],"kind":"declarations"},{"kind":"content","content":[{"anchor":"overview","level":2,"type":"heading","text":"Overview"},{"inlineContent":[{"type":"text","text":"Databases can be constructed using a "},{"type":"codeVoice","code":"CodePointDatabase.Builder"},{"type":"text","text":", after which they may be queried,"},{"type":"text","text":" "},{"type":"text","text":"or printed as a Swift source file."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"Data is stored in 3 sections:"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"A direct lookup for ASCII code-points, to values of the "},{"type":"codeVoice","code":"Schema.ASCIIData"},{"type":"text","text":" type."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"A 2-stage, indexed lookup for BMP code-points, to values of the ","type":"text"},{"code":"Schema.UnicodeData","type":"codeVoice"},{"text":" type.","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The top N bits of the code-point are indexed, where N is chosen by the Schema."},{"type":"text","text":" "},{"type":"text","text":"This means a O(1), branchless reduction in the search space to a block of entries covering 2^(16 - N) code-points."},{"type":"text","text":" "},{"type":"text","text":"For a list of "},{"type":"codeVoice","code":"n"},{"type":"text","text":" elements, a binary-search requires a maximum of "},{"type":"codeVoice","code":"log2(n)"},{"type":"text","text":" comparisons,"},{"type":"text","text":" "},{"type":"text","text":"meaning that in the worst case, when every code-point has an individual data entry, we would need a maximum"},{"type":"text","text":" "},{"type":"text","text":"of (16 - N) comparisons to locate the data for an arbitrary code-point."}]},{"type":"paragraph","inlineContent":[{"text":"Often it will be much fewer than that, because the data entries are grouped in to regions.","type":"text"},{"text":" ","type":"text"},{"text":"For example, the IDNA mapping table has about 4000 entries for all 2^16 code-points in the BMP.","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"Code-point and data tables are split to avoid padding and improve cache performance."}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Per-plane binary-searched tables for non-BMP code-points, to values of the "},{"type":"codeVoice","code":"Schema.UnicodeData"},{"type":"text","text":" type."}],"type":"paragraph"},{"inlineContent":[{"text":"Most planes outside the BMP are ","type":"text"},{"identifier":"https:\/\/en.wikipedia.org\/wiki\/Plane_(Unicode)","isActive":true,"type":"reference"},{"text":", but","type":"text"},{"text":" ","type":"text"},{"text":"the ones that are include plane 1, the SMP (mostly historic scripts and emoji), and planes 2 and 3 -","type":"text"},{"text":" ","type":"text"},{"text":"the SIP and TIP respectively, containing CJK ideographs.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"Per-plane tables means we can represent code-points as 16-bit values, which more efficiently"},{"type":"text","text":" "},{"type":"text","text":"packs their contents and improves cache utilization. Code-point and data tables are split"},{"type":"text","text":" "},{"type":"text","text":"to avoid padding and also improve cache performance."}],"type":"paragraph"}]}],"type":"unorderedList"}]}],"abstract":[{"text":"An immutable database of information about Unicode code-points.","type":"text"}],"topicSections":[{"title":"Structures","identifiers":["doc:\/\/com.karwa.WebURL\/documentation\/UnicodeDataStructures\/CodePointDatabase\/BMPIndex"]},{"title":"Initializers","identifiers":["doc:\/\/com.karwa.WebURL\/documentation\/UnicodeDataStructures\/CodePointDatabase\/init(asciiData:bmpIndex:bmpData:nonbmpData:)"]},{"title":"Subscripts","identifiers":["doc:\/\/com.karwa.WebURL\/documentation\/UnicodeDataStructures\/CodePointDatabase\/subscript(_:)"]},{"title":"Type Aliases","identifiers":["doc:\/\/com.karwa.WebURL\/documentation\/UnicodeDataStructures\/CodePointDatabase\/SplitTable"]},{"title":"Enumerations","identifiers":["doc:\/\/com.karwa.WebURL\/documentation\/UnicodeDataStructures\/CodePointDatabase\/LookupResult"]}],"hierarchy":{"paths":[["doc:\/\/com.karwa.WebURL\/documentation\/UnicodeDataStructures"]]},"schemaVersion":{"patch":0,"major":0,"minor":3},"metadata":{"roleHeading":"Structure","role":"symbol","externalID":"s:21UnicodeDataStructures17CodePointDatabaseV","symbolKind":"struct","modules":[{"name":"UnicodeDataStructures"}],"title":"CodePointDatabase","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"CodePointDatabase","kind":"identifier"}],"navigatorTitle":[{"text":"CodePointDatabase","kind":"identifier"}]},"kind":"symbol","sections":[],"references":{"doc://com.karwa.WebURL/documentation/UnicodeDataStructures/CodePointDatabase/init(asciiData:bmpIndex:bmpData:nonbmpData:)":{"fragments":[{"kind":"identifier","text":"init"},{"text":"(","kind":"text"},{"text":"asciiData","kind":"externalParam"},{"text":": [","kind":"text"},{"text":"Schema","kind":"typeIdentifier"},{"text":".","kind":"text"},{"text":"ASCIIData","kind":"typeIdentifier"},{"text":".","kind":"text"},{"text":"RawStorage","kind":"typeIdentifier"},{"text":"], ","kind":"text"},{"kind":"externalParam","text":"bmpIndex"},{"kind":"text","text":": ["},{"kind":"typeIdentifier","text":"CodePointDatabase","preciseIdentifier":"s:21UnicodeDataStructures17CodePointDatabaseV"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"Schema"},{"kind":"text","text":">."},{"kind":"typeIdentifier","text":"BMPIndex","preciseIdentifier":"s:21UnicodeDataStructures17CodePointDatabaseV8BMPIndexV"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"IndexStorage","preciseIdentifier":"s:21UnicodeDataStructures17CodePointDatabaseV8BMPIndexV12IndexStoragea"},{"kind":"text","text":"], "},{"kind":"externalParam","text":"bmpData"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"CodePointDatabase","preciseIdentifier":"s:21UnicodeDataStructures17CodePointDatabaseV"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"Schema"},{"kind":"text","text":">."},{"kind":"typeIdentifier","text":"SplitTable","preciseIdentifier":"s:21UnicodeDataStructures17CodePointDatabaseV10SplitTablea"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"UInt16","preciseIdentifier":"s:s6UInt16V"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"Schema"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"UnicodeData"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"RawStorage"},{"kind":"text","text":">, "},{"kind":"externalParam","text":"nonbmpData"},{"kind":"text","text":": ["},{"kind":"typeIdentifier","text":"CodePointDatabase","preciseIdentifier":"s:21UnicodeDataStructures17CodePointDatabaseV"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"Schema"},{"kind":"text","text":">."},{"kind":"typeIdentifier","text":"SplitTable","preciseIdentifier":"s:21UnicodeDataStructures17CodePointDatabaseV10SplitTablea"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"UInt16","preciseIdentifier":"s:s6UInt16V"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"Schema"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"UnicodeData"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"RawStorage"},{"kind":"text","text":">])"}],"url":"\/documentation\/unicodedatastructures\/codepointdatabase\/init(asciidata:bmpindex:bmpdata:nonbmpdata:)","kind":"symbol","abstract":[{"type":"text","text":"Initializes a database from static data."}],"type":"topic","role":"symbol","identifier":"doc:\/\/com.karwa.WebURL\/documentation\/UnicodeDataStructures\/CodePointDatabase\/init(asciiData:bmpIndex:bmpData:nonbmpData:)","title":"init(asciiData:bmpIndex:bmpData:nonbmpData:)"},"doc://com.karwa.WebURL/documentation/UnicodeDataStructures":{"role":"collection","title":"UnicodeDataStructures","url":"\/documentation\/unicodedatastructures","type":"topic","identifier":"doc:\/\/com.karwa.WebURL\/documentation\/UnicodeDataStructures","abstract":[],"kind":"symbol"},"doc://com.karwa.WebURL/documentation/UnicodeDataStructures/CodePointDatabase_Schema":{"kind":"symbol","identifier":"doc:\/\/com.karwa.WebURL\/documentation\/UnicodeDataStructures\/CodePointDatabase_Schema","fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"text":"CodePointDatabase_Schema","kind":"identifier"}],"navigatorTitle":[{"text":"CodePointDatabase_Schema","kind":"identifier"}],"abstract":[{"text":"Describes the data associated with code-points in a ","type":"text"},{"type":"codeVoice","code":"CodePointDatabase"},{"text":".","type":"text"}],"url":"\/documentation\/unicodedatastructures\/codepointdatabase_schema","title":"CodePointDatabase_Schema","type":"topic","role":"symbol"},"doc://com.karwa.WebURL/documentation/UnicodeDataStructures/CodePointDatabase/subscript(_:)":{"identifier":"doc:\/\/com.karwa.WebURL\/documentation\/UnicodeDataStructures\/CodePointDatabase\/subscript(_:)","url":"\/documentation\/unicodedatastructures\/codepointdatabase\/subscript(_:)","role":"symbol","conformance":{"constraints":[{"type":"codeVoice","code":"Schema"},{"text":" conforms to ","type":"text"},{"type":"codeVoice","code":"CodePointDatabase_Schema"},{"text":".","type":"text"}],"conformancePrefix":[{"text":"Conforms when","type":"text"}],"availabilityPrefix":[{"text":"Available when","type":"text"}]},"fragments":[{"text":"subscript","kind":"keyword"},{"text":"(","kind":"text"},{"text":"Unicode","preciseIdentifier":"s:s7UnicodeO","kind":"typeIdentifier"},{"text":".","kind":"text"},{"text":"Scalar","preciseIdentifier":"s:s7UnicodeO6ScalarV","kind":"typeIdentifier"},{"text":") -> ","kind":"text"},{"preciseIdentifier":"s:21UnicodeDataStructures17CodePointDatabaseV","text":"CodePointDatabase","kind":"typeIdentifier"},{"text":"<","kind":"text"},{"text":"Schema","kind":"typeIdentifier"},{"text":">.","kind":"text"},{"preciseIdentifier":"s:21UnicodeDataStructures17CodePointDatabaseV12LookupResultO","text":"LookupResult","kind":"typeIdentifier"}],"abstract":[],"type":"topic","kind":"symbol","title":"subscript(_:)"},"doc://com.karwa.WebURL/documentation/UnicodeDataStructures/CodePointDatabase":{"type":"topic","abstract":[{"type":"text","text":"An immutable database of information about Unicode code-points."}],"title":"CodePointDatabase","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"CodePointDatabase"}],"kind":"symbol","identifier":"doc:\/\/com.karwa.WebURL\/documentation\/UnicodeDataStructures\/CodePointDatabase","navigatorTitle":[{"kind":"identifier","text":"CodePointDatabase"}],"role":"symbol","url":"\/documentation\/unicodedatastructures\/codepointdatabase"},"doc://com.karwa.WebURL/documentation/UnicodeDataStructures/CodePointDatabase/LookupResult":{"type":"topic","abstract":[],"title":"CodePointDatabase.LookupResult","fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"LookupResult"}],"kind":"symbol","identifier":"doc:\/\/com.karwa.WebURL\/documentation\/UnicodeDataStructures\/CodePointDatabase\/LookupResult","navigatorTitle":[{"kind":"identifier","text":"LookupResult"}],"role":"symbol","conformance":{"constraints":[{"type":"codeVoice","code":"Schema"},{"text":" conforms to ","type":"text"},{"type":"codeVoice","code":"CodePointDatabase_Schema"},{"type":"text","text":"."}],"conformancePrefix":[{"text":"Conforms when","type":"text"}],"availabilityPrefix":[{"text":"Available when","type":"text"}]},"url":"\/documentation\/unicodedatastructures\/codepointdatabase\/lookupresult"},"doc://com.karwa.WebURL/documentation/UnicodeDataStructures/CodePointDatabase/SplitTable":{"fragments":[{"kind":"keyword","text":"typealias"},{"kind":"text","text":" "},{"kind":"identifier","text":"SplitTable"}],"url":"\/documentation\/unicodedatastructures\/codepointdatabase\/splittable","kind":"symbol","abstract":[],"type":"topic","role":"symbol","identifier":"doc:\/\/com.karwa.WebURL\/documentation\/UnicodeDataStructures\/CodePointDatabase\/SplitTable","title":"CodePointDatabase.SplitTable","navigatorTitle":[{"kind":"identifier","text":"SplitTable"}]},"doc://com.karwa.WebURL/documentation/UnicodeDataStructures/CodePointDatabase/BMPIndex":{"fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"text":"BMPIndex","kind":"identifier"}],"url":"\/documentation\/unicodedatastructures\/codepointdatabase\/bmpindex","kind":"symbol","abstract":[],"type":"topic","role":"symbol","identifier":"doc:\/\/com.karwa.WebURL\/documentation\/UnicodeDataStructures\/CodePointDatabase\/BMPIndex","title":"CodePointDatabase.BMPIndex","navigatorTitle":[{"text":"BMPIndex","kind":"identifier"}]},"https://en.wikipedia.org/wiki/Plane_(Unicode)":{"identifier":"https:\/\/en.wikipedia.org\/wiki\/Plane_(Unicode)","url":"https:\/\/en.wikipedia.org\/wiki\/Plane_(Unicode)","type":"link","titleInlineContent":[{"text":"not assigned","type":"text"}],"title":"not assigned"}}}
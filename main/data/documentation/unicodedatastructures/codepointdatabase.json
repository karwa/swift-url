{"metadata":{"role":"symbol","symbolKind":"struct","modules":[{"name":"UnicodeDataStructures"}],"navigatorTitle":[{"text":"CodePointDatabase","kind":"identifier"}],"fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"CodePointDatabase","kind":"identifier"}],"externalID":"s:21UnicodeDataStructures17CodePointDatabaseV","roleHeading":"Structure","title":"CodePointDatabase"},"primaryContentSections":[{"kind":"declarations","declarations":[{"platforms":["Linux"],"tokens":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"CodePointDatabase","kind":"identifier"},{"text":"<","kind":"text"},{"text":"Schema","kind":"genericParameter"},{"text":"> ","kind":"text"},{"text":"where","kind":"keyword"},{"text":" ","kind":"text"},{"text":"Schema","kind":"typeIdentifier"},{"text":" : ","kind":"text"},{"text":"CodePointDatabase_Schema","preciseIdentifier":"s:21UnicodeDataStructures24CodePointDatabase_SchemaP","kind":"typeIdentifier","identifier":"doc:\/\/com.karwa.WebURL\/documentation\/UnicodeDataStructures\/CodePointDatabase_Schema"}],"languages":["swift"]}]},{"content":[{"anchor":"overview","level":2,"text":"Overview","type":"heading"},{"inlineContent":[{"type":"text","text":"Databases can be constructed using a "},{"type":"codeVoice","code":"CodePointDatabase.Builder"},{"type":"text","text":", after which they may be queried,"},{"type":"text","text":" "},{"type":"text","text":"or printed as a Swift source file."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"Data is stored in 3 sections:"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"A direct lookup for ASCII code-points, to values of the ","type":"text"},{"code":"Schema.ASCIIData","type":"codeVoice"},{"text":" type.","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"A 2-stage, indexed lookup for BMP code-points, to values of the "},{"type":"codeVoice","code":"Schema.UnicodeData"},{"type":"text","text":" type."}]},{"type":"paragraph","inlineContent":[{"text":"The top N bits of the code-point are indexed, where N is chosen by the Schema.","type":"text"},{"text":" ","type":"text"},{"text":"This means a O(1), branchless reduction in the search space to a block of entries covering 2^(16 - N) code-points.","type":"text"},{"text":" ","type":"text"},{"text":"For a list of ","type":"text"},{"code":"n","type":"codeVoice"},{"text":" elements, a binary-search requires a maximum of ","type":"text"},{"code":"log2(n)","type":"codeVoice"},{"text":" comparisons,","type":"text"},{"text":" ","type":"text"},{"text":"meaning that in the worst case, when every code-point has an individual data entry, we would need a maximum","type":"text"},{"text":" ","type":"text"},{"text":"of (16 - N) comparisons to locate the data for an arbitrary code-point.","type":"text"}]},{"type":"paragraph","inlineContent":[{"text":"Often it will be much fewer than that, because the data entries are grouped in to regions.","type":"text"},{"text":" ","type":"text"},{"text":"For example, the IDNA mapping table has about 4000 entries for all 2^16 code-points in the BMP.","type":"text"},{"text":" ","type":"text"},{"text":"Code-point and data tables are split to avoid padding and improve cache performance.","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Per-plane binary-searched tables for non-BMP code-points, to values of the "},{"type":"codeVoice","code":"Schema.UnicodeData"},{"type":"text","text":" type."}],"type":"paragraph"},{"inlineContent":[{"text":"Most planes outside the BMP are ","type":"text"},{"isActive":true,"type":"reference","identifier":"https:\/\/en.wikipedia.org\/wiki\/Plane_(Unicode)"},{"text":", but","type":"text"},{"text":" ","type":"text"},{"text":"the ones that are include plane 1, the SMP (mostly historic scripts and emoji), and planes 2 and 3 -","type":"text"},{"text":" ","type":"text"},{"text":"the SIP and TIP respectively, containing CJK ideographs.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"Per-plane tables means we can represent code-points as 16-bit values, which more efficiently"},{"type":"text","text":" "},{"type":"text","text":"packs their contents and improves cache utilization. Code-point and data tables are split"},{"type":"text","text":" "},{"type":"text","text":"to avoid padding and also improve cache performance."}],"type":"paragraph"}]}],"type":"unorderedList"}],"kind":"content"}],"abstract":[{"type":"text","text":"An immutable database of information about Unicode code-points."}],"schemaVersion":{"minor":3,"patch":0,"major":0},"hierarchy":{"paths":[["doc:\/\/com.karwa.WebURL\/documentation\/UnicodeDataStructures"]]},"topicSections":[{"title":"Structures","identifiers":["doc:\/\/com.karwa.WebURL\/documentation\/UnicodeDataStructures\/CodePointDatabase\/BMPIndex"]},{"title":"Initializers","identifiers":["doc:\/\/com.karwa.WebURL\/documentation\/UnicodeDataStructures\/CodePointDatabase\/init(asciiData:bmpIndex:bmpData:nonbmpData:)"]},{"title":"Subscripts","identifiers":["doc:\/\/com.karwa.WebURL\/documentation\/UnicodeDataStructures\/CodePointDatabase\/subscript(_:)"]},{"title":"Type Aliases","identifiers":["doc:\/\/com.karwa.WebURL\/documentation\/UnicodeDataStructures\/CodePointDatabase\/SplitTable"]},{"title":"Enumerations","identifiers":["doc:\/\/com.karwa.WebURL\/documentation\/UnicodeDataStructures\/CodePointDatabase\/LookupResult"]}],"sections":[],"kind":"symbol","identifier":{"url":"doc:\/\/com.karwa.WebURL\/documentation\/UnicodeDataStructures\/CodePointDatabase","interfaceLanguage":"swift"},"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/unicodedatastructures\/codepointdatabase"]}],"references":{"https://en.wikipedia.org/wiki/Plane_(Unicode)":{"type":"link","identifier":"https:\/\/en.wikipedia.org\/wiki\/Plane_(Unicode)","title":"not assigned","url":"https:\/\/en.wikipedia.org\/wiki\/Plane_(Unicode)","titleInlineContent":[{"text":"not assigned","type":"text"}]},"doc://com.karwa.WebURL/documentation/UnicodeDataStructures/CodePointDatabase":{"url":"\/documentation\/unicodedatastructures\/codepointdatabase","identifier":"doc:\/\/com.karwa.WebURL\/documentation\/UnicodeDataStructures\/CodePointDatabase","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"CodePointDatabase","kind":"identifier"}],"navigatorTitle":[{"text":"CodePointDatabase","kind":"identifier"}],"type":"topic","title":"CodePointDatabase","role":"symbol","abstract":[{"text":"An immutable database of information about Unicode code-points.","type":"text"}],"kind":"symbol"},"doc://com.karwa.WebURL/documentation/UnicodeDataStructures":{"url":"\/documentation\/unicodedatastructures","role":"collection","identifier":"doc:\/\/com.karwa.WebURL\/documentation\/UnicodeDataStructures","kind":"symbol","type":"topic","title":"UnicodeDataStructures","abstract":[]},"doc://com.karwa.WebURL/documentation/UnicodeDataStructures/CodePointDatabase/subscript(_:)":{"type":"topic","url":"\/documentation\/unicodedatastructures\/codepointdatabase\/subscript(_:)","kind":"symbol","title":"subscript(_:)","role":"symbol","abstract":[],"fragments":[{"text":"subscript","kind":"keyword"},{"text":"(","kind":"text"},{"preciseIdentifier":"s:s7UnicodeO","text":"Unicode","kind":"typeIdentifier"},{"text":".","kind":"text"},{"preciseIdentifier":"s:s7UnicodeO6ScalarV","text":"Scalar","kind":"typeIdentifier"},{"text":") -> ","kind":"text"},{"preciseIdentifier":"s:21UnicodeDataStructures17CodePointDatabaseV","text":"CodePointDatabase","kind":"typeIdentifier"},{"text":"<","kind":"text"},{"kind":"typeIdentifier","text":"Schema"},{"kind":"text","text":">."},{"preciseIdentifier":"s:21UnicodeDataStructures17CodePointDatabaseV12LookupResultO","kind":"typeIdentifier","text":"LookupResult"}],"identifier":"doc:\/\/com.karwa.WebURL\/documentation\/UnicodeDataStructures\/CodePointDatabase\/subscript(_:)","conformance":{"constraints":[{"code":"Schema","type":"codeVoice"},{"type":"text","text":" conforms to "},{"code":"CodePointDatabase_Schema","type":"codeVoice"},{"type":"text","text":"."}],"conformancePrefix":[{"type":"text","text":"Conforms when"}],"availabilityPrefix":[{"type":"text","text":"Available when"}]}},"doc://com.karwa.WebURL/documentation/UnicodeDataStructures/CodePointDatabase/SplitTable":{"url":"\/documentation\/unicodedatastructures\/codepointdatabase\/splittable","fragments":[{"text":"typealias","kind":"keyword"},{"text":" ","kind":"text"},{"text":"SplitTable","kind":"identifier"}],"abstract":[],"kind":"symbol","role":"symbol","navigatorTitle":[{"text":"SplitTable","kind":"identifier"}],"type":"topic","title":"CodePointDatabase.SplitTable","identifier":"doc:\/\/com.karwa.WebURL\/documentation\/UnicodeDataStructures\/CodePointDatabase\/SplitTable"},"doc://com.karwa.WebURL/documentation/UnicodeDataStructures/CodePointDatabase/init(asciiData:bmpIndex:bmpData:nonbmpData:)":{"url":"\/documentation\/unicodedatastructures\/codepointdatabase\/init(asciidata:bmpindex:bmpdata:nonbmpdata:)","fragments":[{"text":"init","kind":"identifier"},{"text":"(","kind":"text"},{"text":"asciiData","kind":"externalParam"},{"text":": [","kind":"text"},{"text":"Schema","kind":"typeIdentifier"},{"text":".","kind":"text"},{"text":"ASCIIData","kind":"typeIdentifier"},{"text":".","kind":"text"},{"text":"RawStorage","kind":"typeIdentifier"},{"text":"], ","kind":"text"},{"text":"bmpIndex","kind":"externalParam"},{"text":": [","kind":"text"},{"text":"CodePointDatabase","kind":"typeIdentifier","preciseIdentifier":"s:21UnicodeDataStructures17CodePointDatabaseV"},{"text":"<","kind":"text"},{"text":"Schema","kind":"typeIdentifier"},{"text":">.","kind":"text"},{"preciseIdentifier":"s:21UnicodeDataStructures17CodePointDatabaseV8BMPIndexV","text":"BMPIndex","kind":"typeIdentifier"},{"text":".","kind":"text"},{"preciseIdentifier":"s:21UnicodeDataStructures17CodePointDatabaseV8BMPIndexV12IndexStoragea","text":"IndexStorage","kind":"typeIdentifier"},{"text":"], ","kind":"text"},{"text":"bmpData","kind":"externalParam"},{"text":": ","kind":"text"},{"preciseIdentifier":"s:21UnicodeDataStructures17CodePointDatabaseV","text":"CodePointDatabase","kind":"typeIdentifier"},{"text":"<","kind":"text"},{"text":"Schema","kind":"typeIdentifier"},{"text":">.","kind":"text"},{"preciseIdentifier":"s:21UnicodeDataStructures17CodePointDatabaseV10SplitTablea","text":"SplitTable","kind":"typeIdentifier"},{"text":"<","kind":"text"},{"preciseIdentifier":"s:s6UInt16V","text":"UInt16","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"Schema","kind":"typeIdentifier"},{"text":".","kind":"text"},{"text":"UnicodeData","kind":"typeIdentifier"},{"text":".","kind":"text"},{"text":"RawStorage","kind":"typeIdentifier"},{"text":">, ","kind":"text"},{"text":"nonbmpData","kind":"externalParam"},{"text":": [","kind":"text"},{"preciseIdentifier":"s:21UnicodeDataStructures17CodePointDatabaseV","text":"CodePointDatabase","kind":"typeIdentifier"},{"text":"<","kind":"text"},{"text":"Schema","kind":"typeIdentifier"},{"text":">.","kind":"text"},{"preciseIdentifier":"s:21UnicodeDataStructures17CodePointDatabaseV10SplitTablea","text":"SplitTable","kind":"typeIdentifier"},{"text":"<","kind":"text"},{"preciseIdentifier":"s:s6UInt16V","text":"UInt16","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"Schema","kind":"typeIdentifier"},{"text":".","kind":"text"},{"text":"UnicodeData","kind":"typeIdentifier"},{"text":".","kind":"text"},{"text":"RawStorage","kind":"typeIdentifier"},{"text":">])","kind":"text"}],"abstract":[{"type":"text","text":"Initializes a database from static data."}],"kind":"symbol","role":"symbol","type":"topic","title":"init(asciiData:bmpIndex:bmpData:nonbmpData:)","identifier":"doc:\/\/com.karwa.WebURL\/documentation\/UnicodeDataStructures\/CodePointDatabase\/init(asciiData:bmpIndex:bmpData:nonbmpData:)"},"doc://com.karwa.WebURL/documentation/UnicodeDataStructures/CodePointDatabase/BMPIndex":{"url":"\/documentation\/unicodedatastructures\/codepointdatabase\/bmpindex","identifier":"doc:\/\/com.karwa.WebURL\/documentation\/UnicodeDataStructures\/CodePointDatabase\/BMPIndex","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"BMPIndex","kind":"identifier"}],"navigatorTitle":[{"text":"BMPIndex","kind":"identifier"}],"type":"topic","title":"CodePointDatabase.BMPIndex","role":"symbol","abstract":[],"kind":"symbol"},"doc://com.karwa.WebURL/documentation/UnicodeDataStructures/CodePointDatabase/LookupResult":{"fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"text":"LookupResult","kind":"identifier"}],"identifier":"doc:\/\/com.karwa.WebURL\/documentation\/UnicodeDataStructures\/CodePointDatabase\/LookupResult","navigatorTitle":[{"text":"LookupResult","kind":"identifier"}],"role":"symbol","conformance":{"conformancePrefix":[{"type":"text","text":"Conforms when"}],"constraints":[{"type":"codeVoice","code":"Schema"},{"type":"text","text":" conforms to "},{"type":"codeVoice","code":"CodePointDatabase_Schema"},{"type":"text","text":"."}],"availabilityPrefix":[{"type":"text","text":"Available when"}]},"url":"\/documentation\/unicodedatastructures\/codepointdatabase\/lookupresult","type":"topic","title":"CodePointDatabase.LookupResult","abstract":[],"kind":"symbol"},"doc://com.karwa.WebURL/documentation/UnicodeDataStructures/CodePointDatabase_Schema":{"identifier":"doc:\/\/com.karwa.WebURL\/documentation\/UnicodeDataStructures\/CodePointDatabase_Schema","fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"text":"CodePointDatabase_Schema","kind":"identifier"}],"role":"symbol","abstract":[{"text":"Describes the data associated with code-points in a ","type":"text"},{"code":"CodePointDatabase","type":"codeVoice"},{"text":".","type":"text"}],"url":"\/documentation\/unicodedatastructures\/codepointdatabase_schema","navigatorTitle":[{"text":"CodePointDatabase_Schema","kind":"identifier"}],"type":"topic","kind":"symbol","title":"CodePointDatabase_Schema"}}}